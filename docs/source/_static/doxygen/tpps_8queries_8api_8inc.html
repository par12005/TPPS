<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Tripal Plant PopGen Submit: /var/www/html/sites/all/modules/TGDR/api/tpps.queries.api.inc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tripal Plant PopGen Submit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tpps_8queries_8api_8inc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tpps.queries.api.inc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="tpps_8queries_8api_8inc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4e4c46548086c160a3a8d48ebe9e6b2d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#a4e4c46548086c160a3a8d48ebe9e6b2d">tpps_api_author_pid_query</a> (array $authors)</td></tr>
<tr class="separator:a4e4c46548086c160a3a8d48ebe9e6b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae303230d84e42dc027c9139c6f618d20"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#ae303230d84e42dc027c9139c6f618d20">tpps_api_organism_pid_query</a> (array $orgs)</td></tr>
<tr class="separator:ae303230d84e42dc027c9139c6f618d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70defb1dfa71cb0bdacb4fed73803399"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#a70defb1dfa71cb0bdacb4fed73803399">tpps_api_organization_pid_query</a> (array $orgs)</td></tr>
<tr class="separator:a70defb1dfa71cb0bdacb4fed73803399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb76499ad6ee1d49e901e27eeb6ac86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#acdb76499ad6ee1d49e901e27eeb6ac86">tpps_api_project_author_query</a> (array $pids, $entities=FALSE)</td></tr>
<tr class="separator:acdb76499ad6ee1d49e901e27eeb6ac86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea83b9f5be313d9612cb8e3246a9a44c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#aea83b9f5be313d9612cb8e3246a9a44c">tpps_api_project_design_query</a> (array $pids)</td></tr>
<tr class="separator:aea83b9f5be313d9612cb8e3246a9a44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b6a71e717d37d7f27ffd0783441e05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#a87b6a71e717d37d7f27ffd0783441e05">tpps_api_project_genotype_query</a> (array $pids, $entities=FALSE)</td></tr>
<tr class="separator:a87b6a71e717d37d7f27ffd0783441e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ccf3a0a4a8d484689e402e09271278d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#a0ccf3a0a4a8d484689e402e09271278d">tpps_api_project_organism_query</a> (array $pids, $entities=FALSE)</td></tr>
<tr class="separator:a0ccf3a0a4a8d484689e402e09271278d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf40284f01281d899db9c2c415d3fc33"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#aaf40284f01281d899db9c2c415d3fc33">tpps_api_project_phenotype_query</a> (array $pids, $entities=FALSE)</td></tr>
<tr class="separator:aaf40284f01281d899db9c2c415d3fc33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5da6c5c287efe9401e6fc939690061f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#af5da6c5c287efe9401e6fc939690061f">tpps_api_project_publication_query</a> (array $pids, $entities=FALSE)</td></tr>
<tr class="separator:af5da6c5c287efe9401e6fc939690061f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037cf027321dce1c85794ce7f7be85cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#a037cf027321dce1c85794ce7f7be85cc">tpps_api_project_query</a> (array $pids, $entities=FALSE)</td></tr>
<tr class="separator:a037cf027321dce1c85794ce7f7be85cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56335b291666102c9559696a432c92fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#a56335b291666102c9559696a432c92fe">tpps_api_project_stats_query</a> (array $states)</td></tr>
<tr class="separator:a56335b291666102c9559696a432c92fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b5dc017330dd7b1c0f82b7c46dea2f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#a31b5dc017330dd7b1c0f82b7c46dea2f">tpps_api_project_stock_query</a> (array $pids, $entities=FALSE)</td></tr>
<tr class="separator:a31b5dc017330dd7b1c0f82b7c46dea2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf342b5ed5dc58479b3b3821b5185bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a> (array $vals, array $fields, $override_op=NULL)</td></tr>
<tr class="separator:a0bf342b5ed5dc58479b3b3821b5185bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe4b6dd06d58cec2352b2112c9dce27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a> ($label, array $record_ids)</td></tr>
<tr class="separator:abbe4b6dd06d58cec2352b2112c9dce27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines queries for the TPPS API.</p>
<p>Most queries get information based on a list of project ids, but some can produce a list of project ids based on some conditions. Query functions with names like "tpps_api_*_pid_query" will produce a list of pids based on the provided conditions. For example, the function "tpps_api_author_pid_query" will return a list of pids with authors that match at least one of the provided names. Query functions with names like "tpps_api_project_*_query" will produce a list of ids or entities based on a list of pids. For example, the function "tpps_api_project_organism_query" will return a list of organism ids or, if the entities parameter is set to true, will return a list of organism entities associated with the provided pids. </p>

<p>Definition in file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4e4c46548086c160a3a8d48ebe9e6b2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_author_pid_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$authors</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of project ids associated with provided authors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$authors</td><td>An array of author names.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of associated project ids. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00028">28</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                                   {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.pubauthor&#39;</span>, <span class="stringliteral">&#39;pa&#39;</span>);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  $query-&gt;join(<span class="stringliteral">&#39;chado.project_pub&#39;</span>, <span class="stringliteral">&#39;pp&#39;</span>, <span class="stringliteral">&#39;pp.pub_id = pa.pub_id&#39;</span>);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  $query-&gt;fields(<span class="stringliteral">&#39;pp&#39;</span>, array(<span class="stringliteral">&#39;project_id&#39;</span>));</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($orgs, array(</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="stringliteral">&#39;pa.givennames&#39;</span>,</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="stringliteral">&#39;pa.surname&#39;</span>,</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  ));</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  $query-&gt;condition($or);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">return</span> $query-&gt;execute();</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae303230d84e42dc027c9139c6f618d20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_organism_pid_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$orgs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of project ids associated with provided species.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$orgs</td><td>An array of species names.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of associated project ids. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00049">49</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                                  {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.organism&#39;</span>, <span class="charliteral">&#39;o&#39;</span>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  $query-&gt;join(<span class="stringliteral">&#39;chado.project_organism&#39;</span>, <span class="stringliteral">&#39;po&#39;</span>, <span class="stringliteral">&#39;po.organism_id = o.organism_id&#39;</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  $query-&gt;fields(<span class="stringliteral">&#39;po&#39;</span>, array(<span class="stringliteral">&#39;project_id&#39;</span>));</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($orgs, array(</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="stringliteral">&#39;o.genus&#39;</span>,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="stringliteral">&#39;o.species&#39;</span>,</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  ));</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  $query-&gt;condition($or);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">return</span> $query-&gt;execute();</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a70defb1dfa71cb0bdacb4fed73803399"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_organization_pid_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$orgs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of project ids associated with provided organizations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$orgs</td><td>An array of organization names.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of associated project ids. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00070">70</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                                      {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.contact&#39;</span>, <span class="charliteral">&#39;c&#39;</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  $query-&gt;join(<span class="stringliteral">&#39;chado.contact_relationship&#39;</span>, <span class="stringliteral">&#39;cr&#39;</span>, <span class="stringliteral">&#39;c.contact_id = cr.object_id&#39;</span>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  $query-&gt;join(<span class="stringliteral">&#39;chado.project_contact&#39;</span>, <span class="stringliteral">&#39;pc&#39;</span>, <span class="stringliteral">&#39;pc.contact_id = cr.subject_id&#39;</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  $query-&gt;fields(<span class="stringliteral">&#39;pc&#39;</span>, array(<span class="stringliteral">&#39;project_id&#39;</span>));</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($orgs, array(</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="stringliteral">&#39;c.name&#39;</span>,</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  ));</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  $and = db_and()</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    -&gt;condition(<span class="stringliteral">&#39;c.type_id&#39;</span>, chado_get_cvterm(array(</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&#39;Organization&#39;</span>,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="stringliteral">&#39;cv_id&#39;</span> =&gt; array(</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_contact&#39;</span>,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      ),</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    ))-&gt;cvterm_id)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    -&gt;condition($or);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  $query-&gt;condition($and);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">return</span> $query-&gt;execute();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acdb76499ad6ee1d49e901e27eeb6ac86"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_author_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entities</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of authors associated with provided project ids.</p>
<p>This function currently does not support returning Tripal Entities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$pids</td><td>An array of project ids. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$entities</td><td>(Placeholder) Whether or not to return entities.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of pubauthor table record ids. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00151">151</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                                                       {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.project_pub&#39;</span>, <span class="stringliteral">&#39;pp&#39;</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  $query-&gt;join(<span class="stringliteral">&#39;chado.pubauthor&#39;</span>, <span class="stringliteral">&#39;pa&#39;</span>, <span class="stringliteral">&#39;pa.pub_id = pp.pub_id&#39;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  $query-&gt;fields(<span class="stringliteral">&#39;pa&#39;</span>, array(<span class="stringliteral">&#39;pubauthor_id&#39;</span>));</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($pids, array(</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="stringliteral">&#39;pp.project_id&#39;</span>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  ), <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  $query-&gt;condition($or);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  $query = $query-&gt;execute();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">return</span> $query-&gt;fetchCol();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea83b9f5be313d9612cb8e3246a9a44c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_design_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pids</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of design information associated with provided project ids.</p>
<p>This function does not support returning Tripal Entities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$pids</td><td>An array of project ids.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of study design information. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00203">203</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                                    {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.projectprop&#39;</span>, <span class="stringliteral">&#39;pp&#39;</span>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  $query-&gt;join(<span class="stringliteral">&#39;chado.cvterm&#39;</span>, <span class="charliteral">&#39;c&#39;</span>, <span class="stringliteral">&#39;c.cvterm_id = pp.type_id&#39;</span>);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  $query-&gt;fields(<span class="charliteral">&#39;c&#39;</span>, array(<span class="stringliteral">&#39;name&#39;</span>))</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    -&gt;fields(<span class="stringliteral">&#39;pp&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>));</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($pids, array(</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="stringliteral">&#39;pp.project_id&#39;</span>,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  ), <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  $query-&gt;condition($or);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  $query = $query-&gt;execute();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  $results = array();</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">while</span> (($result = $query-&gt;fetchObject())) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    $results[$result-&gt;name][] = $result-&gt;value;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">return</span> $results;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a87b6a71e717d37d7f27ffd0783441e05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_genotype_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entities</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of genotypes associated with provided project ids.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$pids</td><td>An array of project ids. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$entities</td><td>Whether or not to return entities.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of genotype ids or entities. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00289">289</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                                                         {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.project_stock&#39;</span>, <span class="stringliteral">&#39;ps&#39;</span>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  $query-&gt;join(<span class="stringliteral">&#39;chado.stock_genotype&#39;</span>, <span class="stringliteral">&#39;sg&#39;</span>, <span class="stringliteral">&#39;sg.stock_id = ps.stock_id&#39;</span>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($pids, array(</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="stringliteral">&#39;ps.project_id&#39;</span>,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  ), <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  $query-&gt;fields(<span class="stringliteral">&#39;sg&#39;</span>, array(<span class="stringliteral">&#39;genotype_id&#39;</span>))</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    -&gt;condition($or);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  $query = $query-&gt;execute();</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  $results = $query-&gt;fetchCol();</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (!$entities) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> $results;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a>(<span class="stringliteral">&#39;Genotype&#39;</span>, $results);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_abbe4b6dd06d58cec2352b2112c9dce27"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a></div><div class="ttdeci">tpps_api_record_entities($label, array $record_ids)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00375">tpps.queries.api.inc:375</a></div></div>
<div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0ccf3a0a4a8d484689e402e09271278d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_organism_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entities</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of species associated with provided project ids.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$pids</td><td>An array of project ids. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$entities</td><td>Whether or not to return entities.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of organism ids or entities. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00174">174</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                                                         {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.project_organism&#39;</span>, <span class="stringliteral">&#39;po&#39;</span>)</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    -&gt;fields(<span class="stringliteral">&#39;po&#39;</span>, array(<span class="stringliteral">&#39;organism_id&#39;</span>));</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($pids, array(</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="stringliteral">&#39;po.project_id&#39;</span>,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  ), <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  $query-&gt;condition($or);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  $query = $query-&gt;execute();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  $results = $query-&gt;fetchCol();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span> (!$entities) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> $results;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a>(<span class="stringliteral">&#39;Organism&#39;</span>, $results);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_abbe4b6dd06d58cec2352b2112c9dce27"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a></div><div class="ttdeci">tpps_api_record_entities($label, array $record_ids)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00375">tpps.queries.api.inc:375</a></div></div>
<div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaf40284f01281d899db9c2c415d3fc33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_phenotype_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entities</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of phenotype ids associated with provided project ids.</p>
<p>This function currently does not support returning Tripal Entities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$pids</td><td>An array of project ids. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$entities</td><td>(Placeholder) Whether or not to return entities.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of study design information. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00264">264</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                                                          {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.project_stock&#39;</span>, <span class="stringliteral">&#39;ps&#39;</span>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  $query-&gt;join(<span class="stringliteral">&#39;chado.stock_phenotype&#39;</span>, <span class="stringliteral">&#39;sp&#39;</span>, <span class="stringliteral">&#39;sp.stock_id = ps.stock_id&#39;</span>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($pids, array(</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="stringliteral">&#39;ps.project_id&#39;</span>,</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  ), <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  $query-&gt;fields(<span class="stringliteral">&#39;sp&#39;</span>, array(<span class="stringliteral">&#39;phenotype_id&#39;</span>))</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    -&gt;condition($or);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  $query = $query-&gt;execute();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  $results = $query-&gt;fetchCol();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">return</span> $results;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af5da6c5c287efe9401e6fc939690061f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_publication_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entities</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of publications associated with provided project ids.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$pids</td><td>An array of project ids. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$entities</td><td>Whether or not to return entities.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of publication ids or entities. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00120">120</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                                                            {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.project_pub&#39;</span>, <span class="stringliteral">&#39;pp&#39;</span>)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    -&gt;fields(<span class="stringliteral">&#39;pp&#39;</span>, array(<span class="stringliteral">&#39;pub_id&#39;</span>));</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($pids, array(</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="stringliteral">&#39;pp.project_id&#39;</span>,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  ), <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  $query-&gt;condition($or);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  $query = $query-&gt;execute();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  $results = $query-&gt;fetchCol();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">if</span> (!$entities) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> $results;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a>(<span class="stringliteral">&#39;Publication&#39;</span>, $results);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_abbe4b6dd06d58cec2352b2112c9dce27"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a></div><div class="ttdeci">tpps_api_record_entities($label, array $record_ids)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00375">tpps.queries.api.inc:375</a></div></div>
<div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a037cf027321dce1c85794ce7f7be85cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entities</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of projects associated with provided project ids.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$pids</td><td>An array of project ids. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$entities</td><td>Whether or not to return entities.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of project ids or entities. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00101">101</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                                                {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (!$entities) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> $pids;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a>(<span class="stringliteral">&#39;Project&#39;</span>, $pids);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_abbe4b6dd06d58cec2352b2112c9dce27"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a></div><div class="ttdeci">tpps_api_record_entities($label, array $record_ids)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00375">tpps.queries.api.inc:375</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a56335b291666102c9559696a432c92fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_stats_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$states</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of submission statistics based on provided submission states.</p>
<p>This function does not support returning Tripal Entities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$states</td><td>An array of TPPS submission states.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of TPPS submission statistics. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00318">318</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                                     {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  $results = array();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">foreach</span> ($states as $state) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    $results[] = $state[<span class="stringliteral">&#39;stats&#39;</span>];</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">return</span> $results;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a31b5dc017330dd7b1c0f82b7c46dea2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_project_stock_query </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entities</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns array of stocks associated with provided project ids.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$pids</td><td>An array of project ids. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$entities</td><td>Whether or not to return entities.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of stock ids or entities. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00233">233</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                                                      {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  $query = db_select(<span class="stringliteral">&#39;chado.project_stock&#39;</span>, <span class="charliteral">&#39;p&#39;</span>)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    -&gt;fields(<span class="charliteral">&#39;p&#39;</span>, array(<span class="stringliteral">&#39;stock_id&#39;</span>));</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  $or = <a class="code" href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a>($pids, array(</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="stringliteral">&#39;p.project_id&#39;</span>,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  ), <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  $query-&gt;condition($or);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  $query = $query-&gt;execute();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  $results = $query-&gt;fetchCol();</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (!$entities) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> $results;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a>(<span class="stringliteral">&#39;Stock&#39;</span>, $results);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div><div class="ttc" id="tpps_8queries_8api_8inc_html_abbe4b6dd06d58cec2352b2112c9dce27"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#abbe4b6dd06d58cec2352b2112c9dce27">tpps_api_record_entities</a></div><div class="ttdeci">tpps_api_record_entities($label, array $record_ids)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00375">tpps.queries.api.inc:375</a></div></div>
<div class="ttc" id="tpps_8queries_8api_8inc_html_a0bf342b5ed5dc58479b3b3821b5185bc"><div class="ttname"><a href="tpps_8queries_8api_8inc.html#a0bf342b5ed5dc58479b3b3821b5185bc">tpps_api_query_or</a></div><div class="ttdeci">tpps_api_query_or(array $vals, array $fields, $override_op=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8queries_8api_8inc_source.html#l00344">tpps.queries.api.inc:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0bf342b5ed5dc58479b3b3821b5185bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_query_or </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$vals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$override_op</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a db_or() condition object for use with other TPPS API functions.</p>
<p>The default comparison operator is '~*', but this can be overriden by either specifying a different argument in square brackets following the value being compared, or by specifying a condition-wide operator in the override_op function parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$vals</td><td>The values being compared in this condition. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$fields</td><td>The columns that the values should be compared against. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$override_op</td><td>The condition-wide overriding operator.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>object The constructed db_or() condition object. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00344">344</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                                                            {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  $or = db_or();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordflow">foreach</span> ($vals as $val) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    $op = <span class="stringliteral">&#39;~*&#39;</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;/^(.*)\[(.+)\]$/&#39;</span>, $val, $matches)) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      $val = $matches[1];</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      $op = $matches[2];</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    $op = !empty($override_op) ? $override_op : $op;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">foreach</span> ($fields as $field) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      $or-&gt;condition($field, $val, $op);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">return</span> $or;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abbe4b6dd06d58cec2352b2112c9dce27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_api_record_entities </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$record_ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads and returns entities that refer to the provided record ids.</p>
<p>This function takes a Tripal Entity label and an array of record ids and attempts to load the associated Tripal Entities. It will also attach fields that are not automatically attached by the Tripal Entity loader.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$label</td><td>The label of the Tripal Entity type. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$record_ids</td><td>The array of database record ids referred to by the Tripal Entities.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array of associated Tripal Entities. </dd></dl>

<p>Definition at line <a class="el" href="tpps_8queries_8api_8inc_source.html#l00375">375</a> of file <a class="el" href="tpps_8queries_8api_8inc_source.html">tpps.queries.api.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                                             {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  $bundle = tripal_load_bundle_entity(array(<span class="stringliteral">&#39;label&#39;</span> =&gt; $label));</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  $details = @tripal_get_bundle_details($bundle-&gt;name);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  $entity_ids = array();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">foreach</span> ($record_ids as $id) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    $entity_ids[] = chado_get_record_entity_by_bundle($bundle, $id);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  $field_ids = array();</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">if</span> (!empty($details[<span class="stringliteral">&#39;fields&#39;</span>])) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">foreach</span> ($details[<span class="stringliteral">&#39;fields&#39;</span>] as $field) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      $field_ids[] = field_info_field($field[<span class="stringliteral">&#39;name&#39;</span>])[<span class="stringliteral">&#39;id&#39;</span>];</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">return</span> tripal_load_entity(<span class="stringliteral">&#39;TripalEntity&#39;</span>, $entity_ids, FALSE, $field_ids);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0188a3e6da905bc60aceb35bf790b8c9.html">api</a></li><li class="navelem"><a class="el" href="tpps_8queries_8api_8inc.html">tpps.queries.api.inc</a></li>
    <li class="footer">Generated on Thu Feb 6 2020 13:48:44 for Tripal Plant PopGen Submit by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
