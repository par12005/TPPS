<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Tripal Plant PopGen Submit: /var/www/html/sites/all/modules/TGDR/includes/cvterm_utils.inc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tripal Plant PopGen Submit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cvterm__utils_8inc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cvterm_utils.inc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="cvterm__utils_8inc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a390e96dd8f0b0740700458b650587e25"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a390e96dd8f0b0740700458b650587e25">tpps_get_cvterms_v1_1</a> ()</td></tr>
<tr class="separator:a390e96dd8f0b0740700458b650587e25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a451b5976e5eb516c56f335d877e7354a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a451b5976e5eb516c56f335d877e7354a">tpps_get_cvterms_v1_2</a> ()</td></tr>
<tr class="separator:a451b5976e5eb516c56f335d877e7354a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a9650f68cb984ce39559bcb48372a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a> ($info)</td></tr>
<tr class="separator:ab3a9650f68cb984ce39559bcb48372a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c920f817e935cf101063a1645b73343"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a9c920f817e935cf101063a1645b73343">tpps_load_cvterm</a> ($term, array $options=array(), $version=NULL)</td></tr>
<tr class="separator:a9c920f817e935cf101063a1645b73343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4dff3b7ed5464ded4e61c48dbdf897d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#ab4dff3b7ed5464ded4e61c48dbdf897d">tpps_local_install_term</a> ($key, $version=NULL)</td></tr>
<tr class="separator:ab4dff3b7ed5464ded4e61c48dbdf897d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a832aba990c69be5245b98a3aa060235f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a832aba990c69be5245b98a3aa060235f">tpps_match_cvterms</a> ($old_cvt, $new_cvt)</td></tr>
<tr class="separator:a832aba990c69be5245b98a3aa060235f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f55a8df7fb00794fa49480ed940c0c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a59f55a8df7fb00794fa49480ed940c0c">tpps_migrate_cvterms</a> ($old_major=NULL, $old_minor=NULL, $new_major=<a class="el" href="tpps_8module.html#abb70dace232b0215bd7e769cdca9f57e">TPPS_MAJOR_VERSION</a>, $new_minor=<a class="el" href="tpps_8module.html#aed84bfd93fe1f99b3ff4fc876bb7ceb1">TPPS_MINOR_VERSION</a>)</td></tr>
<tr class="separator:a59f55a8df7fb00794fa49480ed940c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d69f49dd199e06436afff2ff2f072bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a2d69f49dd199e06436afff2ff2f072bd">tpps_ols_add_cv</a> ($ontology_id)</td></tr>
<tr class="separator:a2d69f49dd199e06436afff2ff2f072bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5875400c5697f7a7a82addd2f7f87c1e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a5875400c5697f7a7a82addd2f7f87c1e">tpps_ols_add_cvterm</a> ($term)</td></tr>
<tr class="separator:a5875400c5697f7a7a82addd2f7f87c1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a662ed88ca89ae614485ccbe51e5ef36d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a662ed88ca89ae614485ccbe51e5ef36d">tpps_ols_call</a> ($type, array $args=array())</td></tr>
<tr class="separator:a662ed88ca89ae614485ccbe51e5ef36d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac6edf0b5781170f1ddcffae1201d78"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a6ac6edf0b5781170f1ddcffae1201d78">tpps_ols_install_term</a> ($info)</td></tr>
<tr class="separator:a6ac6edf0b5781170f1ddcffae1201d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5a2cbf90ce737cf54ebec5c8781fd83"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#ab5a2cbf90ce737cf54ebec5c8781fd83">tpps_ols_ontology_info</a> ($id)</td></tr>
<tr class="separator:ab5a2cbf90ce737cf54ebec5c8781fd83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b42a939c67e87421125446454bc5d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a15b42a939c67e87421125446454bc5d9">tpps_ols_search</a> ($query, $ontology=NULL, $exact=TRUE)</td></tr>
<tr class="separator:a15b42a939c67e87421125446454bc5d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d5979cc5880c772d8e0023dcce56d0b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvterm__utils_8inc.html#a1d5979cc5880c772d8e0023dcce56d0b">tpps_ols_url</a> ($types, array $args=array())</td></tr>
<tr class="separator:a1d5979cc5880c772d8e0023dcce56d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines utilities for managing TPPS cvterms. </p>

<p>Definition in file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a390e96dd8f0b0740700458b650587e25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_get_cvterms_v1_1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an array of cvterms that TPPS version 1.1 will be using.</p>
<p>This function is called during installation of TPPS to add these cvterms via the Ontology Lookup Service (<a href="https://www.ebi.ac.uk/ols/">https://www.ebi.ac.uk/ols/</a>). Older versions of this function are kept for the purposes of migrating cvterms that TPPS may have defined in the past.</p>
<dl class="section return"><dt>Returns</dt><dd>array Array of cvterms that TPPS will be using. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00488">488</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                 {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">return</span> array(</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="stringliteral">&#39;study_start&#39;</span> =&gt; <span class="stringliteral">&#39;local:The month and year that the study began.&#39;</span>,</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="stringliteral">&#39;study_end&#39;</span> =&gt; <span class="stringliteral">&#39;local:The month and year that the study ended.&#39;</span>,</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="stringliteral">&#39;experiment_location&#39;</span> =&gt; <span class="stringliteral">&#39;local:Geographic location of the experiment.&#39;</span>,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="stringliteral">&#39;assession_season&#39;</span> =&gt; <span class="stringliteral">&#39;local:Season the trees were assessed.&#39;</span>,</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="stringliteral">&#39;assession_number&#39;</span> =&gt; <span class="stringliteral">&#39;local:Number of times the trees were assessed, on average.&#39;</span>,</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="stringliteral">&#39;co2_control&#39;</span> =&gt; <span class="stringliteral">&#39;local:Whether or not the co2 level of the environment was controlled. True or False.&#39;</span>,</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="stringliteral">&#39;co2_level&#39;</span> =&gt; <span class="stringliteral">&#39;local:Must have an associated co2_control property. If co2_control is True, this term describes the co2 level the environment was kept at. If co2_control is False, this term describes the average measured co2 value in the environment.&#39;</span>,</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="stringliteral">&#39;humidity_control&#39;</span> =&gt; <span class="stringliteral">&#39;local:Whether or not the air humidity level of the environment was controlled. True or False.&#39;</span>,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="stringliteral">&#39;humidity_level&#39;</span> =&gt; <span class="stringliteral">&#39;local:Must have an associated humidity_control property. If humidity_control is True, this term describes the air humidity level the environment was kept at. If humidity_control is False, this term describes the average measured air humidity value in the environment.&#39;</span>,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="stringliteral">&#39;light_control&#39;</span> =&gt; <span class="stringliteral">&#39;local:Whether or not the light intensity level of the environment was controlled. True or False.&#39;</span>,</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="stringliteral">&#39;light_level&#39;</span> =&gt; <span class="stringliteral">&#39;local:Must have an associated light_control property. If light_control is True, this term describes the light intensity level the environment was kept at. If light_control is False, this term describes the average measured light intensity value in the environment.&#39;</span>,</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="stringliteral">&#39;temperature_high&#39;</span> =&gt; <span class="stringliteral">&#39;local:Average high temperature of the environment.&#39;</span>,</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="stringliteral">&#39;temperature_low&#39;</span> =&gt; <span class="stringliteral">&#39;local:Average low temperature of the environment.&#39;</span>,</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="stringliteral">&#39;rooting_type&#39;</span> =&gt; <span class="stringliteral">&#39;local:Type of rooting. Aeroponics, Hydroponics, or Soil.&#39;</span>,</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="stringliteral">&#39;soil_type&#39;</span> =&gt; <span class="stringliteral">&#39;local:Type of soil. For example: Sand, Peat, Mixed, etc.&#39;</span>,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="stringliteral">&#39;soil_container&#39;</span> =&gt; <span class="stringliteral">&#39;local:Type of soil container.&#39;</span>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="stringliteral">&#39;pH_control&#39;</span> =&gt; <span class="stringliteral">&#39;local:Whether or not the pH level of the environment was controlled. True or False.&#39;</span>,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="stringliteral">&#39;pH_level&#39;</span> =&gt; <span class="stringliteral">&#39;local:Must have an associated pH_control property. If pH_control is True, this term describes the pH level the environment was kept at. If pH_control is False, this term describes the average measured pH value in the environment.&#39;</span>,</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="stringliteral">&#39;treatment&#39;</span> =&gt; <span class="stringliteral">&#39;local:Describes the treatment of the trees during the study. For example, air or soil temperature regimes, chemical administration, fertilizer, non-mineral nutrient, or rainfall regimes, disease status, etc.&#39;</span>,</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="stringliteral">&#39;irrigation_type&#39;</span> =&gt; <span class="stringliteral">&#39;local:Describes the type of irrigation. For example, drip irrigation, irrigation from the top, no irrigation, etc.&#39;</span>,</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="stringliteral">&#39;salinity_control&#39;</span> =&gt; <span class="stringliteral">&#39;local:Whether or not the salinity level of the environment was controlled. True or False.&#39;</span>,</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="stringliteral">&#39;salinity_level&#39;</span> =&gt; <span class="stringliteral">&#39;local:Must have an associated salinity_control property. If salinity_control is True, this term describes the salinity level the environment was kept at. If salinity_control is False, this term describes the average measured salinity value in the environment.&#39;</span>,</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="stringliteral">&#39;biotic_environment&#39;</span> =&gt; <span class="stringliteral">&#39;local:Describes the biotic environment.&#39;</span>,</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="stringliteral">&#39;study_type&#39;</span> =&gt; <span class="stringliteral">&#39;local:Describes the type of environment the trees were in during the study. Possible values are Natural Population (Landscape), Growth Chamber, Greenhouse, Experimental/Common Garden, Plantation.&#39;</span>,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="stringliteral">&#39;phenotype_binary_type&#39;</span> =&gt; <span class="stringliteral">&#39;local:Describes one type of a binary phenotype.&#39;</span>,</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="stringliteral">&#39;file_path&#39;</span> =&gt; <span class="stringliteral">&#39;schema:url&#39;</span>,</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="stringliteral">&#39;contact photo&#39;</span> =&gt; <span class="stringliteral">&#39;local:A profile photo for a contact record&#39;</span>,</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="stringliteral">&#39;gps_latitude&#39;</span> =&gt; <span class="stringliteral">&#39;local:Coordinate that specifies north-south position on Earth\&#39;s surface&#39;</span>,</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="stringliteral">&#39;gps_longitude&#39;</span> =&gt; <span class="stringliteral">&#39;local:Coordinate that specifies east-west position on Earth\&#39;s surface&#39;</span>,</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="stringliteral">&#39;association_results_type&#39;</span> =&gt; <span class="stringliteral">&#39;local:The type of the association results.&#39;</span>,</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="stringliteral">&#39;county&#39;</span> =&gt; <span class="stringliteral">&#39;local:A political and administrative division of a state&#39;</span>,</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="stringliteral">&#39;district&#39;</span> =&gt; <span class="stringliteral">&#39;local:A distinct area of a geographic entity, such as a country or city&#39;</span>,</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="stringliteral">&#39;organism 4 letter code&#39;</span> =&gt; <span class="stringliteral">&#39;local:4 letter abbreviation of species. Usually first two letters of genus + first two letters of species, may be different if that code already exists (use next letters from species if possible).&#39;</span>,</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="stringliteral">&#39;cpSSR&#39;</span> =&gt; <span class="stringliteral">&#39;local:Chloroplast simple sequence repeats.&#39;</span>,</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="stringliteral">&#39;SSR&#39;</span> =&gt; <span class="stringliteral">&#39;local:Simple sequence repeats. Microsatellite.&#39;</span>,</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="stringliteral">&#39;time&#39;</span> =&gt; <span class="stringliteral">&#39;local:A quality in which events occur in sequence.&#39;</span>,</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="stringliteral">&#39;source_description&#39;</span> =&gt; <span class="stringliteral">&#39;local:A textual description of study type and comments for a source.&#39;</span>,</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="stringliteral">&#39;location&#39;</span> =&gt; <span class="stringliteral">&#39;nd_geolocation_property:Location&#39;</span>,</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="stringliteral">&#39;format&#39;</span> =&gt; <span class="stringliteral">&#39;sep:format&#39;</span>,</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="stringliteral">&#39;environment&#39;</span> =&gt; <span class="stringliteral">&#39;biomaterial_property:climate_environment&#39;</span>,</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="stringliteral">&#39;description&#39;</span> =&gt; <span class="stringliteral">&#39;schema:description&#39;</span>,</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  );</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a451b5976e5eb516c56f335d877e7354a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_get_cvterms_v1_2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an array of cvterms that TPPS version 1.2 will be using.</p>
<p>This function is called during installation of TPPS to add these cvterms via the Ontology Lookup Service (<a href="https://www.ebi.ac.uk/ols/">https://www.ebi.ac.uk/ols/</a>). Older versions of this function are kept for the purposes of migrating cvterms that TPPS may have defined in the past.</p>
<dl class="section return"><dt>Returns</dt><dd>array Array of cvterms that TPPS will be using. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00262">262</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                 {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">return</span> array(</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Local terms.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="stringliteral">&#39;assession_number&#39;</span> =&gt; <span class="stringliteral">&#39;local:Number of times the trees were assessed, on average.&#39;</span>,</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="stringliteral">&#39;temperature_high&#39;</span> =&gt; <span class="stringliteral">&#39;local:Average high temperature of the environment.&#39;</span>,</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="stringliteral">&#39;temperature_low&#39;</span> =&gt; <span class="stringliteral">&#39;local:Average low temperature of the environment.&#39;</span>,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="stringliteral">&#39;rooting_type&#39;</span> =&gt; <span class="stringliteral">&#39;local:Type of rooting. Aeroponics, Hydroponics, or Soil.&#39;</span>,</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="stringliteral">&#39;organism 4 letter code&#39;</span> =&gt; <span class="stringliteral">&#39;local:4 letter abbreviation of species. Usually first two letters of genus + first two letters of species, may be different if that code already exists (use next letters from species if possible).&#39;</span>,</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="stringliteral">&#39;source_description&#39;</span> =&gt; <span class="stringliteral">&#39;local:A textual description of study type and comments for a source.&#39;</span>,</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="stringliteral">&#39;email&#39;</span> =&gt; <span class="stringliteral">&#39;local:Email address&#39;</span>,</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="stringliteral">&#39;number_samples&#39;</span> =&gt; <span class="stringliteral">&#39;local:Number of samples&#39;</span>,</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="stringliteral">&#39;gps_type&#39;</span> =&gt; <span class="stringliteral">&#39;local:Type of GPS coordinates. Exact, Approximate, or Site-based.&#39;</span>,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="stringliteral">&#39;gps_precision&#39;</span> =&gt; <span class="stringliteral">&#39;local:Precision of GPS coordinates.&#39;</span>,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// Tripal terms.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="stringliteral">&#39;article&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_pub:Journal Article&#39;</span>,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="stringliteral">&#39;abstract&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_pub:Abstract&#39;</span>,</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="stringliteral">&#39;authors&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_pub:Authors&#39;</span>,</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="stringliteral">&#39;person&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_contact:Person&#39;</span>,</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="stringliteral">&#39;contact_part_of&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_contact:part of&#39;</span>,</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="stringliteral">&#39;organization&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_contact:Organization&#39;</span>,</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="stringliteral">&#39;country&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_contact:Country&#39;</span>,</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="stringliteral">&#39;state&#39;</span> =&gt; <span class="stringliteral">&#39;tripal_contact:State&#39;</span>,</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="stringliteral">&#39;analysis_type&#39;</span> =&gt; <span class="stringliteral">&#39;analysis_property:Analysis Type&#39;</span>,</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// PPEO terms.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="stringliteral">&#39;experiment_location&#39;</span> =&gt; <span class="stringliteral">&#39;ppeo:location&#39;</span>,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="stringliteral">&#39;file_path&#39;</span> =&gt; <span class="stringliteral">&#39;ppeo:data file&#39;</span>,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// NCIT terms.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="stringliteral">&#39;study_start&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Study Start Date&#39;</span>,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="stringliteral">&#39;district&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Locality&#39;</span>,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="stringliteral">&#39;study_end&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Study Completion Date&#39;</span>,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="stringliteral">&#39;assession_season&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Season&#39;</span>,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="stringliteral">&#39;soil_container&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Container&#39;</span>,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="stringliteral">&#39;gps_latitude&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Latitude&#39;</span>,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="stringliteral">&#39;gps_longitude&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Longitude&#39;</span>,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="stringliteral">&#39;location&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Location&#39;</span>,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="stringliteral">&#39;association_results_type&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Data Type&#39;</span>,</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="stringliteral">&#39;county&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:County&#39;</span>,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="stringliteral">&#39;read_depth&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Read Depth&#39;</span>,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="stringliteral">&#39;format&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Format&#39;</span>,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="stringliteral">&#39;minimum&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Minimum&#39;</span>,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="stringliteral">&#39;maximum&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Maximum&#39;</span>,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="stringliteral">&#39;indel&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Indel Mutation&#39;</span>,</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="stringliteral">&#39;p_value&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:P-Value&#39;</span>,</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="stringliteral">&#39;lambda&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Lambda&#39;</span>,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="stringliteral">&#39;bonferroni&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Adjusted Bonferroni Correction&#39;</span>,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="stringliteral">&#39;boolean&#39;</span> =&gt; <span class="stringliteral">&#39;ncit:Boolean&#39;</span>,</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// PATO terms.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="stringliteral">&#39;age&#39;</span> =&gt; <span class="stringliteral">&#39;pato:age&#39;</span>,</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="stringliteral">&#39;alive&#39;</span> =&gt; <span class="stringliteral">&#39;pato:alive&#39;</span>,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="stringliteral">&#39;amount&#39;</span> =&gt; <span class="stringliteral">&#39;pato:amount&#39;</span>,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="stringliteral">&#39;angle&#39;</span> =&gt; <span class="stringliteral">&#39;pato:angle&#39;</span>,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="stringliteral">&#39;area&#39;</span> =&gt; <span class="stringliteral">&#39;pato:area&#39;</span>,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="stringliteral">&#39;bent&#39;</span> =&gt; <span class="stringliteral">&#39;pato:bent&#39;</span>,</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="stringliteral">&#39;circumference&#39;</span> =&gt; <span class="stringliteral">&#39;pato:circumference&#39;</span>,</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="stringliteral">&#39;color&#39;</span> =&gt; <span class="stringliteral">&#39;pato:color&#39;</span>,</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="stringliteral">&#39;composition&#39;</span> =&gt; <span class="stringliteral">&#39;pato:composition&#39;</span>,</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="stringliteral">&#39;concentration_of&#39;</span> =&gt; <span class="stringliteral">&#39;pato:concentration of&#39;</span>,</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="stringliteral">&#39;damage&#39;</span> =&gt; <span class="stringliteral">&#39;pato:damage&#39;</span>,</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="stringliteral">&#39;description&#39;</span> =&gt; <span class="stringliteral">&#39;pato:description&#39;</span>,</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="stringliteral">&#39;diameter&#39;</span> =&gt; <span class="stringliteral">&#39;pato:diameter&#39;</span>,</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="stringliteral">&#39;distance&#39;</span> =&gt; <span class="stringliteral">&#39;pato:distance&#39;</span>,</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="stringliteral">&#39;growth_quality_of_occurrent&#39;</span> =&gt; <span class="stringliteral">&#39;pato:growth quality of occurrent&#39;</span>,</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="stringliteral">&#39;growth_rate&#39;</span> =&gt; <span class="stringliteral">&#39;pato:growth rate&#39;</span>,</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="stringliteral">&#39;has_number_of&#39;</span> =&gt; <span class="stringliteral">&#39;pato:has number of&#39;</span>,</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="stringliteral">&#39;height&#39;</span> =&gt; <span class="stringliteral">&#39;pato:height&#39;</span>,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="stringliteral">&#39;humidity_level&#39;</span> =&gt; <span class="stringliteral">&#39;pato:humidity&#39;</span>,</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="stringliteral">&#39;intensity&#39;</span> =&gt; <span class="stringliteral">&#39;pato:intensity&#39;</span>,</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="stringliteral">&#39;length&#39;</span> =&gt; <span class="stringliteral">&#39;pato:length&#39;</span>,</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="stringliteral">&#39;lesioned&#39;</span> =&gt; <span class="stringliteral">&#39;pato:lesioned&#39;</span>,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="stringliteral">&#39;maturity&#39;</span> =&gt; <span class="stringliteral">&#39;pato:maturity&#39;</span>,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="stringliteral">&#39;pH_level&#39;</span> =&gt; <span class="stringliteral">&#39;pato:acidity&#39;</span>,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="stringliteral">&#39;position&#39;</span> =&gt; <span class="stringliteral">&#39;pato:position&#39;</span>,</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="stringliteral">&#39;pressure&#39;</span> =&gt; <span class="stringliteral">&#39;pato:pressure&#39;</span>,</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="stringliteral">&#39;proportionality_to&#39;</span> =&gt; <span class="stringliteral">&#39;pato:proportionality to&#39;</span>,</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="stringliteral">&#39;qualitative&#39;</span> =&gt; <span class="stringliteral">&#39;pato:qualitative&#39;</span>,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="stringliteral">&#39;rate&#39;</span> =&gt; <span class="stringliteral">&#39;pato:rate&#39;</span>,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="stringliteral">&#39;rough&#39;</span> =&gt; <span class="stringliteral">&#39;pato:rough&#39;</span>,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="stringliteral">&#39;shape&#39;</span> =&gt; <span class="stringliteral">&#39;pato:shape&#39;</span>,</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="stringliteral">&#39;size&#39;</span> =&gt; <span class="stringliteral">&#39;pato:size&#39;</span>,</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="stringliteral">&#39;temperature&#39;</span> =&gt; <span class="stringliteral">&#39;pato:temperature&#39;</span>,</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="stringliteral">&#39;texture&#39;</span> =&gt; <span class="stringliteral">&#39;pato:texture&#39;</span>,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="stringliteral">&#39;thickness&#39;</span> =&gt; <span class="stringliteral">&#39;pato:thickness&#39;</span>,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="stringliteral">&#39;time&#39;</span> =&gt; <span class="stringliteral">&#39;pato:time&#39;</span>,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="stringliteral">&#39;volume&#39;</span> =&gt; <span class="stringliteral">&#39;pato:volume&#39;</span>,</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="stringliteral">&#39;weight&#39;</span> =&gt; <span class="stringliteral">&#39;pato:weight&#39;</span>,</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="stringliteral">&#39;width&#39;</span> =&gt; <span class="stringliteral">&#39;pato:width&#39;</span>,</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// PO terms.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="stringliteral">&#39;whole plant&#39;</span> =&gt; <span class="stringliteral">&#39;po:whole plant&#39;</span>,</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="stringliteral">&#39;bark&#39;</span> =&gt; <span class="stringliteral">&#39;po:bark:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="stringliteral">&#39;branch&#39;</span> =&gt; <span class="stringliteral">&#39;po:branch:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="stringliteral">&#39;bud&#39;</span> =&gt; <span class="stringliteral">&#39;po:bud:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="stringliteral">&#39;catkin_inflorescence&#39;</span> =&gt; <span class="stringliteral">&#39;po:catkin inflorescence:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="stringliteral">&#39;endocarp&#39;</span> =&gt; <span class="stringliteral">&#39;po:endocarp:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="stringliteral">&#39;floral_organ&#39;</span> =&gt; <span class="stringliteral">&#39;po:floral organ:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="stringliteral">&#39;flower&#39;</span> =&gt; <span class="stringliteral">&#39;po:flower:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="stringliteral">&#39;flower_bud&#39;</span> =&gt; <span class="stringliteral">&#39;po:flower bud:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="stringliteral">&#39;flower_fascicle&#39;</span> =&gt; <span class="stringliteral">&#39;po:flower fascicle:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="stringliteral">&#39;fruit&#39;</span> =&gt; <span class="stringliteral">&#39;po:fruit:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="stringliteral">&#39;leaf&#39;</span> =&gt; <span class="stringliteral">&#39;po:leaf:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="stringliteral">&#39;leaf_rachis&#39;</span> =&gt; <span class="stringliteral">&#39;po:leaf rachis:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="stringliteral">&#39;leaflet&#39;</span> =&gt; <span class="stringliteral">&#39;po:leaflet:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="stringliteral">&#39;nut_fruit&#39;</span> =&gt; <span class="stringliteral">&#39;po:nut fruit:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="stringliteral">&#39;petal&#39;</span> =&gt; <span class="stringliteral">&#39;po:petal:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="stringliteral">&#39;petiole&#39;</span> =&gt; <span class="stringliteral">&#39;po:petiole:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="stringliteral">&#39;phloem&#39;</span> =&gt; <span class="stringliteral">&#39;po:phloem:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="stringliteral">&#39;plant_callus&#39;</span> =&gt; <span class="stringliteral">&#39;po:plant callus:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="stringliteral">&#39;primary_thickening_meristem&#39;</span> =&gt; <span class="stringliteral">&#39;po:primary thickening meristem:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    #<span class="stringliteral">&#39;root&#39;</span> =&gt; <span class="stringliteral">&#39;po:root:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="stringliteral">&#39;secondary_xylem&#39;</span> =&gt; <span class="stringliteral">&#39;po:secondary xylem:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="stringliteral">&#39;seed&#39;</span> =&gt; <span class="stringliteral">&#39;po:seed:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="stringliteral">&#39;shoot_system&#39;</span> =&gt; <span class="stringliteral">&#39;po:shoot system:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="stringliteral">&#39;stem&#39;</span> =&gt; <span class="stringliteral">&#39;po:stem:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="stringliteral">&#39;stomatal_complex&#39;</span> =&gt; <span class="stringliteral">&#39;po:stomatal complex:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="stringliteral">&#39;strobilus&#39;</span> =&gt; <span class="stringliteral">&#39;po:strobilus:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="stringliteral">&#39;terminal_bud&#39;</span> =&gt; <span class="stringliteral">&#39;po:terminal bud:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="stringliteral">&#39;vascular_leaf&#39;</span> =&gt; <span class="stringliteral">&#39;po:vascular leaf:plant_anatomy&#39;</span>,</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// PECO terms.</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="stringliteral">&#39;co2_control&#39;</span> =&gt; <span class="stringliteral">&#39;peco:carbon dioxide exposure&#39;</span>,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="stringliteral">&#39;humidity_control&#39;</span> =&gt; <span class="stringliteral">&#39;peco:humidity exposure&#39;</span>,</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="stringliteral">&#39;light_control&#39;</span> =&gt; <span class="stringliteral">&#39;peco:light intensity exposure&#39;</span>,</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="stringliteral">&#39;pH_control&#39;</span> =&gt; <span class="stringliteral">&#39;peco:pH exposure&#39;</span>,</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="stringliteral">&#39;treatment&#39;</span> =&gt; <span class="stringliteral">&#39;peco:plant exposure&#39;</span>,</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="stringliteral">&#39;salinity_control&#39;</span> =&gt; <span class="stringliteral">&#39;peco:salt exposure&#39;</span>,</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="stringliteral">&#39;biotic_environment&#39;</span> =&gt; <span class="stringliteral">&#39;peco:biotic plant exposure&#39;</span>,</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="stringliteral">&#39;study_type&#39;</span> =&gt; <span class="stringliteral">&#39;peco:study type&#39;</span>,</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// ENVO terms.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="stringliteral">&#39;co2_level&#39;</span> =&gt; <span class="stringliteral">&#39;envo:atmospheric carbon dioxide&#39;</span>,</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="stringliteral">&#39;light_level&#39;</span> =&gt; <span class="stringliteral">&#39;envo:visible spectrum radiation&#39;</span>,</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="stringliteral">&#39;soil_type&#39;</span> =&gt; <span class="stringliteral">&#39;envo:soil&#39;</span>,</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="stringliteral">&#39;environment&#39;</span> =&gt; <span class="stringliteral">&#39;envo:environmental system&#39;</span>,</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="stringliteral">&#39;atmosphere&#39;</span> =&gt; <span class="stringliteral">&#39;envo:atmosphere&#39;</span>,</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// CHEBI terms.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="stringliteral">&#39;salinity_level&#39;</span> =&gt; <span class="stringliteral">&#39;chebi:salt&#39;</span>,</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// AGRO terms.</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="stringliteral">&#39;irrigation_type&#39;</span> =&gt; <span class="stringliteral">&#39;agro:irrigation process&#39;</span>,</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// SO terms.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="stringliteral">&#39;reference_genome&#39;</span> =&gt; <span class="stringliteral">&#39;so:reference_genome&#39;</span>,</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="stringliteral">&#39;genotype&#39;</span> =&gt; <span class="stringliteral">&#39;so:genotype&#39;</span>,</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="stringliteral">&#39;sequence_variant&#39;</span> =&gt; <span class="stringliteral">&#39;so:sequence_variant&#39;</span>,</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="stringliteral">&#39;snp&#39;</span> =&gt; <span class="stringliteral">&#39;so:SNP&#39;</span>,</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="stringliteral">&#39;ssr&#39;</span> =&gt; <span class="stringliteral">&#39;so:microsatellite&#39;</span>,</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="stringliteral">&#39;genetic_marker&#39;</span> =&gt; <span class="stringliteral">&#39;so:genetic_marker&#39;</span>,</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="stringliteral">&#39;quality_value&#39;</span> =&gt; <span class="stringliteral">&#39;so:quality_value&#39;</span>,</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="stringliteral">&#39;allelic_frequency&#39;</span> =&gt; <span class="stringliteral">&#39;so:allelic_frequency&#39;</span>,</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="stringliteral">&#39;synonymous&#39;</span> =&gt; <span class="stringliteral">&#39;so:synonymous&#39;</span>,</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="stringliteral">&#39;clone&#39;</span> =&gt; <span class="stringliteral">&#39;so:clone&#39;</span>,</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="stringliteral">&#39;supercontig&#39;</span> =&gt; <span class="stringliteral">&#39;so:supercontig&#39;</span>,</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="stringliteral">&#39;scaffold&#39;</span> =&gt; <span class="stringliteral">&#39;so:chromosome&#39;</span>,</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="stringliteral">&#39;has_part&#39;</span> =&gt; <span class="stringliteral">&#39;so:has_part&#39;</span>,</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// EDAM terms.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="stringliteral">&#39;filter&#39;</span> =&gt; <span class="stringliteral">&#39;edam:Sequence contamination filtering&#39;</span>,</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// UO terms.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="stringliteral">&#39;unit&#39;</span> =&gt; <span class="stringliteral">&#39;uo:unit&#39;</span>,</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="stringliteral">&#39;centimeter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:centimeter&#39;</span>,</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="stringliteral">&#39;cubic_centimeter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:cubic centimeter&#39;</span>,</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="stringliteral">&#39;day&#39;</span> =&gt; <span class="stringliteral">&#39;uo:day&#39;</span>,</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="stringliteral">&#39;degrees_celsius&#39;</span> =&gt; <span class="stringliteral">&#39;uo:degree Celsius&#39;</span>,</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="stringliteral">&#39;degrees_fahrenheit&#39;</span> =&gt; <span class="stringliteral">&#39;uo:degree Fahrenheit&#39;</span>,</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="stringliteral">&#39;grams_per_square_meter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:gram per square meter&#39;</span>,</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="stringliteral">&#39;gram&#39;</span> =&gt; <span class="stringliteral">&#39;uo:gram&#39;</span>,</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="stringliteral">&#39;luminous_intensity_unit&#39;</span> =&gt; <span class="stringliteral">&#39;uo:luminous intensity unit&#39;</span>,</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="stringliteral">&#39;kilogram&#39;</span> =&gt; <span class="stringliteral">&#39;uo:kilogram&#39;</span>,</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="stringliteral">&#39;kilogram_per_cubic_meter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:kilogram per cubic meter&#39;</span>,</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="stringliteral">&#39;liter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:liter&#39;</span>,</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="stringliteral">&#39;cubic_meter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:cubic meter&#39;</span>,</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="stringliteral">&#39;pascal&#39;</span> =&gt; <span class="stringliteral">&#39;uo:pascal&#39;</span>,</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="stringliteral">&#39;meter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:meter&#39;</span>,</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="stringliteral">&#39;milligram&#39;</span> =&gt; <span class="stringliteral">&#39;uo:milligram&#39;</span>,</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="stringliteral">&#39;milliliter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:milliliter&#39;</span>,</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="stringliteral">&#39;millimeter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:millimeter&#39;</span>,</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="stringliteral">&#39;micrometer&#39;</span> =&gt; <span class="stringliteral">&#39;uo:micrometer&#39;</span>,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="stringliteral">&#39;percent&#39;</span> =&gt; <span class="stringliteral">&#39;uo:percent&#39;</span>,</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    #<span class="stringliteral">&#39;ratio&#39;</span> =&gt; <span class="stringliteral">&#39;uo:ratio&#39;</span>,</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="stringliteral">&#39;square_micrometer&#39;</span> =&gt; <span class="stringliteral">&#39;uo:square micrometer&#39;</span>,</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="stringliteral">&#39;square_millimeter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:square millimeter&#39;</span>,</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="stringliteral">&#39;watt_per_square_meter&#39;</span> =&gt; <span class="stringliteral">&#39;uo:watt per square meter&#39;</span>,</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="stringliteral">&#39;year&#39;</span> =&gt; <span class="stringliteral">&#39;uo:year&#39;</span>,</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// SBO terms.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="stringliteral">&#39;phenotype&#39;</span> =&gt; <span class="stringliteral">&#39;sbo:phenotype&#39;</span>,</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// OBI terms.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="stringliteral">&#39;organism&#39;</span> =&gt; <span class="stringliteral">&#39;obi:organism&#39;</span>,</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="stringliteral">&#39;q_value&#39;</span> =&gt; <span class="stringliteral">&#39;obi:q-value&#39;</span>,</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="stringliteral">&#39;p_adj_fwe&#39;</span> =&gt; <span class="stringliteral">&#39;obi:FWER adjusted p-value&#39;</span>,</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// TAXRANK terms.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="stringliteral">&#39;family&#39;</span> =&gt; <span class="stringliteral">&#39;taxonomic_rank:family&#39;</span>,</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="stringliteral">&#39;subkingdom&#39;</span> =&gt; <span class="stringliteral">&#39;taxonomic_rank:subkingdom&#39;</span>,</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="stringliteral">&#39;order&#39;</span> =&gt; <span class="stringliteral">&#39;taxonomic_rank:order&#39;</span>,</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="stringliteral">&#39;speciesaggregate&#39;</span> =&gt; <span class="stringliteral">&#39;taxonomic_rank:speciesaggregate&#39;</span>,</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// NCBI terms.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="stringliteral">&#39;common name&#39;</span> =&gt; <span class="stringliteral">&#39;ncbitaxon:common name&#39;</span>,</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// Abandoned terms.</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="stringliteral">&#39;phenotype_binary_type&#39;</span> =&gt; NULL,</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="stringliteral">&#39;contact photo&#39;</span> =&gt; NULL,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="stringliteral">&#39;cpSSR&#39;</span> =&gt; NULL,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="stringliteral">&#39;SSR&#39;</span> =&gt; NULL,</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  );</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3a9650f68cb984ce39559bcb48372a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_load_cv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load a cv based on an OLS ontology id or cv_info object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array&#160;|&#160;string</td><td class="paramname">$info</td><td>Either an OLS ontology id or a cv_info object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>stdClass|NULL The resulting cv object or NULL on failure. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00123">123</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                             {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  $id = $info;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> (!is_string($info)) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    $id = $info[<span class="stringliteral">&#39;id&#39;</span>];</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  $id = strtolower($id);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  $cache = cache_get(<span class="stringliteral">&#39;tpps_cv&#39;</span>)-&gt;data ?? array();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// Try to load cv_id from cache.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  $cv_id = $cache[$id] ?? NULL;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> (!empty($cv_id)) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> chado_get_cv(array(</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="stringliteral">&#39;cv_id&#39;</span> =&gt; $cv_id,</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    ));</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  $cv_info = $info;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span> (is_string($info)) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    $cv_info = <a class="code" href="cvterm__utils_8inc.html#ab5a2cbf90ce737cf54ebec5c8781fd83">tpps_ols_ontology_info</a>($info);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (empty($cv_info)) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    $cv_info = array(</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="stringliteral">&#39;cvname&#39;</span> =&gt; $info,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="stringliteral">&#39;namespace&#39;</span> =&gt; $info,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    );</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  $query = array(</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="stringliteral">&#39;name&#39;</span> =&gt; array(</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="stringliteral">&#39;op&#39;</span> =&gt; <span class="stringliteral">&#39;ILIKE&#39;</span>,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="stringliteral">&#39;data&#39;</span> =&gt; $cv_info[<span class="stringliteral">&#39;cvname&#39;</span>],</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    ),</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  );</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  $cv = chado_generate_var(<span class="stringliteral">&#39;cv&#39;</span>, $query);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">if</span> (!$cv and !empty($cv_info[<span class="stringliteral">&#39;namespace&#39;</span>])) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    $query[<span class="stringliteral">&#39;name&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>] = $cv_info[<span class="stringliteral">&#39;namespace&#39;</span>];</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    $cv = chado_generate_var(<span class="stringliteral">&#39;cv&#39;</span>, $query);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (is_array($cv)) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    $query[<span class="stringliteral">&#39;name&#39;</span>][<span class="stringliteral">&#39;op&#39;</span>] = <span class="stringliteral">&#39;LIKE&#39;</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    $cv = chado_generate_var(<span class="stringliteral">&#39;cv&#39;</span>, $query);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">if</span> (!$cv) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  $cache[$id] = $cv-&gt;cv_id;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  cache_set(<span class="stringliteral">&#39;tpps_cv&#39;</span>, $cache);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">return</span> $cv;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_ab5a2cbf90ce737cf54ebec5c8781fd83"><div class="ttname"><a href="cvterm__utils_8inc.html#ab5a2cbf90ce737cf54ebec5c8781fd83">tpps_ols_ontology_info</a></div><div class="ttdeci">tpps_ols_ontology_info($id)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00042">cvterm_utils.inc:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9c920f817e935cf101063a1645b73343"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_load_cvterm </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$version</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load a cvterm based on a key from tpps_get_cvterms_v&lt;version&gt;().</p>
<p>If the key does not appear in tpps_get_cvterms_v&lt;version&gt;(), then we just load the cvterm using the provided key as the name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$term</td><td>The key of the cvterm we are trying to load. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Optional additional options to be passed to chado_get_cvterm(). </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$version</td><td>Optional TPPS cvterm version.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>stdClass|FALSE The resulting cvterm object, or FALSE on failure. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00194">194</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                                                            {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  $cvt_v = variable_get(<span class="stringliteral">&#39;tpps_cvterms_version&#39;</span>, <span class="stringliteral">&#39;1_1&#39;</span>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  $get_cvt = <span class="stringliteral">&#39;tpps_get_cvterms_v&#39;</span> . ($version ?? $cvt_v);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  $terms = $get_cvt();</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  $info = $terms[$term] ?? NULL;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> (empty($info)) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    $info = <span class="stringliteral">&quot;:$term&quot;</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  preg_match(<span class="stringliteral">&#39;/^([^:]*):([^:]+):?([^:]+)?$/&#39;</span>, $info, $matches);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  $ontology = $matches[1];</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  $name = $matches[2];</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  $alt_ontology = $matches[3] ?? NULL;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  $identifiers = array(</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="stringliteral">&#39;name&#39;</span> =&gt; $term,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="stringliteral">&#39;is_obsolete&#39;</span> =&gt; 0,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  );</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> (!empty($ontology)) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> ($ontology == <span class="stringliteral">&#39;local&#39;</span>) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      $identifiers[<span class="stringliteral">&#39;definition&#39;</span>] = $name;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      $identifiers[<span class="stringliteral">&#39;name&#39;</span>] = $name;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      $identifiers[<span class="stringliteral">&#39;cv_id&#39;</span>] = <a class="code" href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a>($ontology)-&gt;cv_id;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  $result = chado_get_cvterm($identifiers, $options);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">if</span> (empty($result) and $ontology != <span class="stringliteral">&#39;local&#39;</span> and !empty($alt_ontology)) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    $identifiers[<span class="stringliteral">&#39;cv_id&#39;</span>] = <a class="code" href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a>($alt_ontology)-&gt;cv_id;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    $result = chado_get_cvterm($identifiers, $options);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (empty($result)) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (!empty($options[<span class="stringliteral">&#39;job&#39;</span>])) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      $options[<span class="stringliteral">&#39;job&#39;</span>]-&gt;logMessage(<span class="stringliteral">&#39;[WARNING] Failed to load cvterm: @term&#39;</span>, array(<span class="stringliteral">&#39;@term&#39;</span> =&gt; $term), TRIPAL_WARNING);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      $trace = debug_backtrace()[1];</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      $job = NULL;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">if</span> (!empty($trace[<span class="stringliteral">&#39;args&#39;</span>]) and gettype($trace[<span class="stringliteral">&#39;args&#39;</span>]) == <span class="stringliteral">&#39;array&#39;</span>) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">foreach</span> ($trace[<span class="stringliteral">&#39;args&#39;</span>] as $key =&gt; $arg) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          <span class="keywordflow">if</span> (gettype($arg) == <span class="stringliteral">&#39;object&#39;</span> and get_class($arg) == <span class="stringliteral">&#39;TripalJob&#39;</span>) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            $job = &amp;$trace[<span class="stringliteral">&#39;args&#39;</span>][$key];</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;          }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">if</span> (!empty($job)) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          $job-&gt;logMessage(<span class="stringliteral">&#39;[WARNING] Failed to load cvterm: @term&#39;</span>, array(<span class="stringliteral">&#39;@term&#39;</span> =&gt; $term), TRIPAL_WARNING);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">return</span> $result;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_ab3a9650f68cb984ce39559bcb48372a9"><div class="ttname"><a href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a></div><div class="ttdeci">tpps_load_cv($info)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00123">cvterm_utils.inc:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab4dff3b7ed5464ded4e61c48dbdf897d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_local_install_term </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$version</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Installs a local TPPS cvterm based on a provided key.</p>
<p>This function should be used if the <a class="el" href="cvterm__utils_8inc.html#a6ac6edf0b5781170f1ddcffae1201d78">tpps_ols_install_term()</a> function returns "local".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td>The key of the TPPS cvterm being installed. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$version</td><td>The TPPS cvterm version to use. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00681">681</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                                                        {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">if</span> (empty($version)) {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    $version = <a class="code" href="tpps_8module.html#abb70dace232b0215bd7e769cdca9f57e">TPPS_MAJOR_VERSION</a> . <span class="charliteral">&#39;_&#39;</span> . <a class="code" href="tpps_8module.html#aed84bfd93fe1f99b3ff4fc876bb7ceb1">TPPS_MINOR_VERSION</a>;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  $get_cvt = <span class="stringliteral">&#39;tpps_get_cvterms_v&#39;</span> . $version;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  $terms = $get_cvt();</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  $info = $terms[$key] ?? NULL;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">if</span> (empty($info)) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">throw</span> new \Exception(<span class="stringliteral">&quot;Error installing term $key: Term info could not be found for TPPS cvterm version $version.&quot;</span>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  $local_db = variable_get(<span class="stringliteral">&#39;tpps_local_db&#39;</span>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  $parts = explode(<span class="charliteral">&#39;:&#39;</span>, $info);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  $term = $parts[1];</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  $cvt = chado_get_cvterm(array(</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="stringliteral">&#39;name&#39;</span> =&gt; $key,</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="stringliteral">&#39;definition&#39;</span> =&gt; $term,</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="stringliteral">&#39;is_obsolete&#39;</span> =&gt; 0,</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  ));</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">if</span> (!$cvt) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    drupal_set_message(<span class="stringliteral">&quot;Creating local cvterm $key&quot;</span>, <span class="stringliteral">&#39;status&#39;</span>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    $cvt = chado_insert_cvterm(array(</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&quot;{$local_db-&gt;name}:$key&quot;</span>,</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="stringliteral">&#39;name&#39;</span> =&gt; $key,</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="stringliteral">&#39;definition&#39;</span> =&gt; $term,</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="stringliteral">&#39;cv_name&#39;</span> =&gt; <span class="stringliteral">&#39;local&#39;</span>,</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    ));</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> (!$cvt) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      drupal_set_message(<span class="stringliteral">&quot;Error creating local cvterm $key&quot;</span>, <span class="stringliteral">&#39;error&#39;</span>);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">return</span> $cvt;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div><div class="ttc" id="tpps_8module_html_abb70dace232b0215bd7e769cdca9f57e"><div class="ttname"><a href="tpps_8module.html#abb70dace232b0215bd7e769cdca9f57e">TPPS_MAJOR_VERSION</a></div><div class="ttdeci">const TPPS_MAJOR_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8module_source.html#l00008">tpps.module:8</a></div></div>
<div class="ttc" id="tpps_8module_html_aed84bfd93fe1f99b3ff4fc876bb7ceb1"><div class="ttname"><a href="tpps_8module.html#aed84bfd93fe1f99b3ff4fc876bb7ceb1">TPPS_MINOR_VERSION</a></div><div class="ttdeci">const TPPS_MINOR_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8module_source.html#l00009">tpps.module:9</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a832aba990c69be5245b98a3aa060235f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_match_cvterms </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$old_cvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$new_cvt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a cvtermsynonym record for two matching cvterms.</p>
<p>This is useful for migrating from an older TPPS cvterm version to a new one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$old_cvt</td><td>The old cvterm object returned by chado_get_cvterm(). </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$new_cvt</td><td>The new cvterm object returned by chado_get_cvterm(). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00728">728</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                                {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">if</span> (empty($old_cvt-&gt;name)) {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  $result = db_select(<span class="stringliteral">&#39;chado.cvtermsynonym&#39;</span>, <span class="stringliteral">&#39;cs&#39;</span>)</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    -&gt;fields(<span class="stringliteral">&#39;cs&#39;</span>, array(<span class="stringliteral">&#39;cvtermsynonym_id&#39;</span>))</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    -&gt;condition(<span class="stringliteral">&#39;cvterm_id&#39;</span>, $new_cvt-&gt;cvterm_id)</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    -&gt;condition(<span class="stringliteral">&#39;synonym&#39;</span>, $old_cvt-&gt;name)</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    -&gt;range(0,1)</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    -&gt;execute()-&gt;fetchObject() ?? NULL;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (empty($result)) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    db_insert(<span class="stringliteral">&#39;chado.cvtermsynonym&#39;</span>)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      -&gt;fields(array(</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="stringliteral">&#39;cvterm_id&#39;</span> =&gt; $new_cvt-&gt;cvterm_id,</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="stringliteral">&#39;synonym&#39;</span> =&gt; $old_cvt-&gt;name,</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="stringliteral">&#39;type_id&#39;</span> =&gt; chado_get_cvterm(array(</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;          <span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&#39;exact&#39;</span>,</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;          <span class="stringliteral">&#39;cv_id&#39;</span> =&gt; array(</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="stringliteral">&#39;synonym_type&#39;</span>,</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;          ),</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        ))-&gt;cvterm_id,</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      ))</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      -&gt;execute();</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  $old_synonyms = db_select(<span class="stringliteral">&#39;chado.cvtermsynonym&#39;</span>, <span class="charliteral">&#39;c&#39;</span>)</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    -&gt;fields(<span class="charliteral">&#39;c&#39;</span>, array(<span class="stringliteral">&#39;synonym&#39;</span>, <span class="stringliteral">&#39;type_id&#39;</span>))</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    -&gt;condition(<span class="stringliteral">&#39;cvterm_id&#39;</span>, $old_cvt-&gt;cvterm_id)</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    -&gt;execute();</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordflow">while</span> (($syn = $old_synonyms-&gt;fetchObject())) {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    $result = db_select(<span class="stringliteral">&#39;chado.cvtermsynonym&#39;</span>, <span class="stringliteral">&#39;cs&#39;</span>)</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      -&gt;fields(<span class="stringliteral">&#39;cs&#39;</span>, array(<span class="stringliteral">&#39;cvtermsynonym_id&#39;</span>))</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      -&gt;condition(<span class="stringliteral">&#39;cvterm_id&#39;</span>, $new_cvt-&gt;cvterm_id)</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      -&gt;condition(<span class="stringliteral">&#39;synonym&#39;</span>, $syn-&gt;synonym)</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      -&gt;range(0,1)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      -&gt;execute()-&gt;fetchObject() ?? NULL;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span> (empty($result)) {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      db_insert(<span class="stringliteral">&#39;chado.cvtermsynonym&#39;</span>)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        -&gt;fields(array(</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;          <span class="stringliteral">&#39;cvterm_id&#39;</span> =&gt; $new_cvt-&gt;cvterm_id,</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;          <span class="stringliteral">&#39;synonym&#39;</span> =&gt; $syn-&gt;synonym,</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          <span class="stringliteral">&#39;type_id&#39;</span> =&gt; $syn-&gt;type_id,</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        ))</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        -&gt;execute();</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a59f55a8df7fb00794fa49480ed940c0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_migrate_cvterms </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$old_major</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$old_minor</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$new_major</em> = <code><a class="el" href="tpps_8module.html#abb70dace232b0215bd7e769cdca9f57e">TPPS_MAJOR_VERSION</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$new_minor</em> = <code><a class="el" href="tpps_8module.html#aed84bfd93fe1f99b3ff4fc876bb7ceb1">TPPS_MINOR_VERSION</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Migrate TPPS cvterms from an old version to a new version.</p>
<p>This is useful if a term that was previously in a local ontology is being moved to a standardized ontology from OLS. New cvterms inherit all of the same synonyms as the old cvterms. If version numbers are left blank, then the old version number will be imported from the tpps_cvterms_version variable and the new version number will be imported by the TPPS_MAJOR_VERSION and TPPS_MINOR_VERSION constants defined in <a class="el" href="tpps_8module.html">tpps.module</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$old_major</td><td>Major version of the old cvterms. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$old_minor</td><td>Minor version of the old cvterms. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$new_major</td><td>Opotional major version of the new cvterms. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$new_minor</td><td>Opotional minor version of the new cvterms. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00798">798</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                                                                                                                                      {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  $old_v = variable_get(<span class="stringliteral">&#39;tpps_cvterms_version&#39;</span>, <span class="stringliteral">&#39;1_1&#39;</span>);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">if</span> (!empty($old_major) and !empty($old_minor)) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    $old_v = $old_major . <span class="charliteral">&#39;_&#39;</span> . $old_minor;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  $new_v = $new_major . <span class="charliteral">&#39;_&#39;</span> . $new_minor;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">if</span> ($new_v === $old_v) {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  $old_term_func = <span class="stringliteral">&#39;tpps_get_cvterms_v&#39;</span> . $old_v;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  $new_term_func = <span class="stringliteral">&#39;tpps_get_cvterms_v&#39;</span> . $new_v;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  $old_terms = $old_term_func();</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  $new_terms = $new_term_func();</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  $transaction = db_transaction();</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">foreach</span> ($old_terms as $key =&gt; $old_info) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      $new_info = $new_terms[$key] ?? NULL;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">if</span> (!isset($new_info) or !isset($old_info)) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keywordflow">if</span> ($old_info == $new_info) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      preg_match(<span class="stringliteral">&#39;/^([^:]*):(.*)$/&#39;</span>, $old_info, $matches);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      $old_ont = $matches[1];</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      $old_term = $matches[2];</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keywordflow">if</span> ($old_ont == <span class="stringliteral">&#39;local&#39;</span>) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        $old_cvt = chado_get_cvterm(array(</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;          <span class="stringliteral">&#39;name&#39;</span> =&gt; $key,</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;          <span class="stringliteral">&#39;definition&#39;</span> =&gt; $old_term,</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        ));</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        $old_cvt = chado_get_cvterm(array(</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;          <span class="stringliteral">&#39;name&#39;</span> =&gt; $old_term,</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;          <span class="stringliteral">&#39;cv_id&#39;</span> =&gt; <a class="code" href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a>($old_ont)-&gt;cv_id,</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        ));</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      $new_cvt = <a class="code" href="cvterm__utils_8inc.html#a6ac6edf0b5781170f1ddcffae1201d78">tpps_ols_install_term</a>($new_info);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">if</span> ($new_cvt === FALSE) {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">throw</span> new \Exception(<span class="stringliteral">&quot;No OLS terms found for term $new_info&quot;</span>);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      unset($new_terms[$key]);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="cvterm__utils_8inc.html#a832aba990c69be5245b98a3aa060235f">tpps_match_cvterms</a>($old_cvt, $new_cvt);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">foreach</span> ($new_terms as $key =&gt; $info) {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="keywordflow">if</span> (!empty($info)) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        $result = <a class="code" href="cvterm__utils_8inc.html#a6ac6edf0b5781170f1ddcffae1201d78">tpps_ols_install_term</a>($info);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keywordflow">if</span> ($result === <span class="stringliteral">&#39;local&#39;</span>) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;          <a class="code" href="cvterm__utils_8inc.html#ab4dff3b7ed5464ded4e61c48dbdf897d">tpps_local_install_term</a>($key, $new_v);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    variable_set(<span class="stringliteral">&#39;tpps_cvterms_version&#39;</span>, $new_v);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">catch</span> (\Exception $e) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    $transaction-&gt;rollback();</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">throw</span> $e;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_ab3a9650f68cb984ce39559bcb48372a9"><div class="ttname"><a href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a></div><div class="ttdeci">tpps_load_cv($info)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00123">cvterm_utils.inc:123</a></div></div>
<div class="ttc" id="cvterm__utils_8inc_html_a832aba990c69be5245b98a3aa060235f"><div class="ttname"><a href="cvterm__utils_8inc.html#a832aba990c69be5245b98a3aa060235f">tpps_match_cvterms</a></div><div class="ttdeci">tpps_match_cvterms($old_cvt, $new_cvt)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00728">cvterm_utils.inc:728</a></div></div>
<div class="ttc" id="cvterm__utils_8inc_html_ab4dff3b7ed5464ded4e61c48dbdf897d"><div class="ttname"><a href="cvterm__utils_8inc.html#ab4dff3b7ed5464ded4e61c48dbdf897d">tpps_local_install_term</a></div><div class="ttdeci">tpps_local_install_term($key, $version=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00681">cvterm_utils.inc:681</a></div></div>
<div class="ttc" id="cvterm__utils_8inc_html_a6ac6edf0b5781170f1ddcffae1201d78"><div class="ttname"><a href="cvterm__utils_8inc.html#a6ac6edf0b5781170f1ddcffae1201d78">tpps_ols_install_term</a></div><div class="ttdeci">tpps_ols_install_term($info)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00620">cvterm_utils.inc:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2d69f49dd199e06436afff2ff2f072bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_ols_add_cv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ontology_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a controlled vocabulary to chado based on an OLS ontology id.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$ontology_id</td><td>The OLS ontology id we will be adding.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>stdClass|bool The resulting cv object, or FALSE on failure. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00543">543</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                       {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  $cv_info = <a class="code" href="cvterm__utils_8inc.html#ab5a2cbf90ce737cf54ebec5c8781fd83">tpps_ols_ontology_info</a>($ontology_id);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  $query = array(</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="stringliteral">&#39;name&#39;</span> =&gt; array(</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="stringliteral">&#39;op&#39;</span> =&gt; <span class="stringliteral">&#39;ILIKE&#39;</span>,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="stringliteral">&#39;data&#39;</span> =&gt; $cv_info[<span class="stringliteral">&#39;cvname&#39;</span>],</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    ),</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  );</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  $db = chado_get_db($query);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">if</span> (!$db) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    drupal_set_message(<span class="stringliteral">&quot;Adding db $ontology_id&quot;</span>, <span class="stringliteral">&#39;status&#39;</span>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    chado_insert_db(array(</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="stringliteral">&#39;name&#39;</span> =&gt; $cv_info[<span class="stringliteral">&#39;cvname&#39;</span>],</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="stringliteral">&#39;description&#39;</span> =&gt; $cv_info[<span class="stringliteral">&#39;description&#39;</span>],</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="stringliteral">&#39;url&#39;</span> =&gt; $cv_info[<span class="stringliteral">&#39;url&#39;</span>],</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="stringliteral">&#39;urlprefix&#39;</span> =&gt; $cv_info[<span class="stringliteral">&#39;urlprefix&#39;</span>],</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    ));</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  $cv = <a class="code" href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a>($cv_info);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">if</span> (!$cv) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    drupal_set_message(<span class="stringliteral">&quot;Adding vocabulary $ontology_id&quot;</span>, <span class="stringliteral">&#39;status&#39;</span>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    $cv = chado_insert_cv($cv_info[<span class="stringliteral">&#39;name&#39;</span>], $cv_info[<span class="stringliteral">&#39;description&#39;</span>]);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">if</span> (!$cv) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    drupal_set_message(<span class="stringliteral">&quot;There was an error adding vocabulary $ontology_id&quot;</span>, <span class="stringliteral">&#39;error&#39;</span>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">return</span> $cv;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_ab5a2cbf90ce737cf54ebec5c8781fd83"><div class="ttname"><a href="cvterm__utils_8inc.html#ab5a2cbf90ce737cf54ebec5c8781fd83">tpps_ols_ontology_info</a></div><div class="ttdeci">tpps_ols_ontology_info($id)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00042">cvterm_utils.inc:42</a></div></div>
<div class="ttc" id="cvterm__utils_8inc_html_ab3a9650f68cb984ce39559bcb48372a9"><div class="ttname"><a href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a></div><div class="ttdeci">tpps_load_cv($info)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00123">cvterm_utils.inc:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5875400c5697f7a7a82addd2f7f87c1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_ols_add_cvterm </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$term</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a controlled vocabulary term to chado based on an OLS term object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$term</td><td>The decoded OLS JSON term object returned by the OLS API.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>stdClass|bool The resulting cvterm object, or FALSE on failure </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00584">584</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                                    {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  $cv = <a class="code" href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a>($term-&gt;ontology_name);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  $query = array(</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="stringliteral">&#39;name&#39;</span> =&gt; $term-&gt;label,</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="stringliteral">&#39;cv_id&#39;</span> =&gt; $cv-&gt;cv_id,</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  );</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  $cvt = chado_get_cvterm($query);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">if</span> (!$cvt) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    drupal_set_message(<span class="stringliteral">&quot;Adding cvterm {$term-&gt;label}, description: {$term-&gt;description[0]} to ontology {$term-&gt;ontology_prefix}&quot;</span>, <span class="stringliteral">&#39;status&#39;</span>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    $cvterm = array(</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="stringliteral">&#39;id&#39;</span> =&gt; $term-&gt;obo_id,</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="stringliteral">&#39;name&#39;</span> =&gt; $term-&gt;label,</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="stringliteral">&#39;definition&#39;</span> =&gt; $term-&gt;description[0],</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="stringliteral">&#39;cv_name&#39;</span> =&gt; $cv-&gt;name,</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    );</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    $cvt = chado_insert_cvterm($cvterm);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordflow">if</span> (!$cvt) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    drupal_set_message(<span class="stringliteral">&quot;There was an error adding cvterm {$term-&gt;label} to ontology {$term-&gt;ontology_prefix}&quot;</span>, <span class="stringliteral">&#39;error&#39;</span>);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">return</span> $cvt;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_ab3a9650f68cb984ce39559bcb48372a9"><div class="ttname"><a href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a></div><div class="ttdeci">tpps_load_cv($info)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00123">cvterm_utils.inc:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a662ed88ca89ae614485ccbe51e5ef36d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_ols_call </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$args</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Makes a call to the OLS API.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;array</td><td class="paramname">$type</td><td>Type(s) to pass to <a class="el" href="cvterm__utils_8inc.html#a1d5979cc5880c772d8e0023dcce56d0b">tpps_ols_url()</a>. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$args</td><td>Optional additional args to pass to <a class="el" href="cvterm__utils_8inc.html#a1d5979cc5880c772d8e0023dcce56d0b">tpps_ols_url()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>stdClass Decoded JSON object returned by the OLS API. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00078">78</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                                     {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  $url = <a class="code" href="cvterm__utils_8inc.html#a1d5979cc5880c772d8e0023dcce56d0b">tpps_ols_url</a>($type, $args);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  $data = file_get_contents($url);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> json_decode($data);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_a1d5979cc5880c772d8e0023dcce56d0b"><div class="ttname"><a href="cvterm__utils_8inc.html#a1d5979cc5880c772d8e0023dcce56d0b">tpps_ols_url</a></div><div class="ttdeci">tpps_ols_url($types, array $args=array())</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00095">cvterm_utils.inc:95</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ac6edf0b5781170f1ddcffae1201d78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_ols_install_term </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Install a single cvterm to chado from OLS.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$info</td><td>String of the format '&lt;ontology&gt;:'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>stdClass|string|bool The resulting cvterm object, or "local", or FALSE on failure. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00620">620</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                      {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  $parts = explode(<span class="charliteral">&#39;:&#39;</span>, $info);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  $ontology = $parts[0];</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> ($ontology == <span class="stringliteral">&#39;local&#39;</span>) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&#39;local&#39;</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  $term = $parts[1];</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  $alt_ontology = $parts[2] ?? NULL;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  $cv = <a class="code" href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a>($ontology);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordflow">if</span> (!$cv) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    $cv = <a class="code" href="cvterm__utils_8inc.html#a2d69f49dd199e06436afff2ff2f072bd">tpps_ols_add_cv</a>($ontology);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  $cvt = chado_get_cvterm(array(</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="stringliteral">&#39;name&#39;</span> =&gt; $term,</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="stringliteral">&#39;cv_id&#39;</span> =&gt; $cv-&gt;cv_id,</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  ));</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordflow">if</span> (!$cvt and !empty($alt_ontology)) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    $cv = <a class="code" href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a>($alt_ontology);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> ($cv) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      $cvt = chado_get_cvterm(array(</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="stringliteral">&#39;name&#39;</span> =&gt; $term,</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="stringliteral">&#39;cv_id&#39;</span> =&gt; $cv-&gt;cv_id,</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      ));</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">if</span> (!$cvt) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    $response = <a class="code" href="cvterm__utils_8inc.html#a15b42a939c67e87421125446454bc5d9">tpps_ols_search</a>($term, $ontology)-&gt;response;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> ($response-&gt;numFound == 0) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> ($response-&gt;numFound != 1) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      $docs = array();</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">foreach</span> ($response-&gt;docs as $doc) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        $docs[$doc-&gt;iri] = $doc;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">if</span> (count($docs) != 1) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">throw</span> new \Exception(<span class="stringliteral">&quot;conflict found for cvterm $term from ontology $ontology: $response-&gt;numFound terms found&quot;</span>);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">return</span> FALSE;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      $response-&gt;docs[0] = current($docs);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    $cvt = <a class="code" href="cvterm__utils_8inc.html#a5875400c5697f7a7a82addd2f7f87c1e">tpps_ols_add_cvterm</a>($response-&gt;docs[0]);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">return</span> $cvt;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_ab3a9650f68cb984ce39559bcb48372a9"><div class="ttname"><a href="cvterm__utils_8inc.html#ab3a9650f68cb984ce39559bcb48372a9">tpps_load_cv</a></div><div class="ttdeci">tpps_load_cv($info)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00123">cvterm_utils.inc:123</a></div></div>
<div class="ttc" id="cvterm__utils_8inc_html_a15b42a939c67e87421125446454bc5d9"><div class="ttname"><a href="cvterm__utils_8inc.html#a15b42a939c67e87421125446454bc5d9">tpps_ols_search</a></div><div class="ttdeci">tpps_ols_search($query, $ontology=NULL, $exact=TRUE)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00021">cvterm_utils.inc:21</a></div></div>
<div class="ttc" id="cvterm__utils_8inc_html_a5875400c5697f7a7a82addd2f7f87c1e"><div class="ttname"><a href="cvterm__utils_8inc.html#a5875400c5697f7a7a82addd2f7f87c1e">tpps_ols_add_cvterm</a></div><div class="ttdeci">tpps_ols_add_cvterm($term)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00584">cvterm_utils.inc:584</a></div></div>
<div class="ttc" id="cvterm__utils_8inc_html_a2d69f49dd199e06436afff2ff2f072bd"><div class="ttname"><a href="cvterm__utils_8inc.html#a2d69f49dd199e06436afff2ff2f072bd">tpps_ols_add_cv</a></div><div class="ttdeci">tpps_ols_add_cv($ontology_id)</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00543">cvterm_utils.inc:543</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab5a2cbf90ce737cf54ebec5c8781fd83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_ols_ontology_info </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves information about an ontology from OLS based on the ontology id.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$id</td><td>The id of the ontology.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array containing some minimal information about the specified ontology. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00042">42</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                                     {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  $response = @<a class="code" href="cvterm__utils_8inc.html#a662ed88ca89ae614485ccbe51e5ef36d">tpps_ols_call</a>(array(</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="stringliteral">&#39;ontologies&#39;</span>,</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    $id,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  ));</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">if</span> (empty($response)) {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  $name = $response-&gt;config-&gt;preferredPrefix;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  $base_uri = $response-&gt;config-&gt;baseUris[0] ?? NULL;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">if</span> (substr($base_uri, -1 * (strlen($name) + 1)) == <span class="stringliteral">&quot;_$name&quot;</span>) {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    $url_prefix = substr($base_uri, 0, -5) . <span class="stringliteral">&#39;{db}_{accession}&#39;</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">return</span> array(</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="stringliteral">&#39;id&#39;</span> =&gt; $response-&gt;ontologyId,</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="stringliteral">&#39;name&#39;</span> =&gt; $name,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="stringliteral">&#39;description&#39;</span> =&gt; $response-&gt;config-&gt;title,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="stringliteral">&#39;url&#39;</span> =&gt; $response-&gt;config-&gt;homepage,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="stringliteral">&#39;urlprefix&#39;</span> =&gt; $url_prefix ?? NULL,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="stringliteral">&#39;cvname&#39;</span> =&gt; $name,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="stringliteral">&#39;namespace&#39;</span> =&gt; $response-&gt;config-&gt;annotations-&gt;{<span class="stringliteral">&#39;default-namespace&#39;</span>}[0],</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  );</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_a662ed88ca89ae614485ccbe51e5ef36d"><div class="ttname"><a href="cvterm__utils_8inc.html#a662ed88ca89ae614485ccbe51e5ef36d">tpps_ols_call</a></div><div class="ttdeci">tpps_ols_call($type, array $args=array())</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00078">cvterm_utils.inc:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a15b42a939c67e87421125446454bc5d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_ols_search </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ontology</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$exact</em> = <code>TRUE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Searches OLS for a term, possibly from a specific ontology.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$query</td><td>The term we are looking for. </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$ontology</td><td>Optional ontology to search in. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$exact</td><td>Whether or not we should be looking for an exact match.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>stdClass Decoded JSON object returned by the OLS API. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00021">21</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                                                                  {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  $exact = $exact ? <span class="stringliteral">&#39;true&#39;</span> : <span class="stringliteral">&#39;false&#39;</span>;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  $args = array();</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  $args[] = <span class="stringliteral">&quot;q=&quot;</span> . urlencode($query);</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  $args[] = <span class="stringliteral">&quot;exact=$exact&quot;</span>;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  $args[] = <span class="stringliteral">&quot;queryFields=label&quot;</span>;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keywordflow">if</span> (!empty($ontology)) {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    $args[] = <span class="stringliteral">&quot;ontology=$ontology&quot;</span>;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  }</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="cvterm__utils_8inc.html#a662ed88ca89ae614485ccbe51e5ef36d">tpps_ols_call</a>(<span class="stringliteral">&#39;search&#39;</span>, $args);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div><div class="ttc" id="cvterm__utils_8inc_html_a662ed88ca89ae614485ccbe51e5ef36d"><div class="ttname"><a href="cvterm__utils_8inc.html#a662ed88ca89ae614485ccbe51e5ef36d">tpps_ols_call</a></div><div class="ttdeci">tpps_ols_call($type, array $args=array())</div><div class="ttdef"><b>Definition:</b> <a href="cvterm__utils_8inc_source.html#l00078">cvterm_utils.inc:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1d5979cc5880c772d8e0023dcce56d0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpps_ols_url </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$args</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a URL for querying the OLS API based on supplied parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;array</td><td class="paramname">$types</td><td>Type(s) to specify the type of API call being made. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$args</td><td>Optional additional parameters to be passed to the API.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string The constructed URL for the desired API call. </dd></dl>

<p>Definition at line <a class="el" href="cvterm__utils_8inc_source.html#l00095">95</a> of file <a class="el" href="cvterm__utils_8inc_source.html">cvterm_utils.inc</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                                     {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  $url = <a class="code" href="tpps_8module.html#af7bf9710017bd9686672ca88e6b29c5d">TPPS_OLS_BASE</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (!is_array($types)) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    $url .= <span class="stringliteral">&quot;$types/&quot;</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">foreach</span> ($types as $type) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      $url .= <span class="stringliteral">&quot;$type/&quot;</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (!empty($args)) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    $url .= <span class="stringliteral">&quot;?&quot;</span> . implode(<span class="charliteral">&#39;&amp;&#39;</span>, $args);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">return</span> $url;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div><div class="ttc" id="tpps_8module_html_af7bf9710017bd9686672ca88e6b29c5d"><div class="ttname"><a href="tpps_8module.html#af7bf9710017bd9686672ca88e6b29c5d">TPPS_OLS_BASE</a></div><div class="ttdeci">const TPPS_OLS_BASE</div><div class="ttdef"><b>Definition:</b> <a href="tpps_8module_source.html#l00018">tpps.module:18</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_09e761304027c904456130627fd4dcf5.html">includes</a></li><li class="navelem"><a class="el" href="cvterm__utils_8inc.html">cvterm_utils.inc</a></li>
    <li class="footer">Generated on Tue Aug 17 2021 13:51:57 for Tripal Plant PopGen Submit by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
